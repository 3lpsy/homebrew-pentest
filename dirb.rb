require 'formula'

class Dirb < Formula
  homepage 'git://git.kali.org/packages/dirb.git'
  url 'git://git.kali.org/packages/dirb.git', :using => :git, :branch => 'kali/master'
  version "2.2-20161120"
  revision 2

  depends_on "autoconf" => :build
  depends_on "automake" => :build
  depends_on "curl" => :build

  def install
    inreplace "src/global.h", "/usr/share/dirb/wordlists/common.txt", "#{pkgshare}/wordlists/common.txt"
    inreplace "src/dirb.c", "/usr/share/dirb/wordlists/vulns/apache.txt", "#{pkgshare}/wordlists/vulns/apache.txt"

    system "./configure", "--prefix=#{prefix}"
    system "make"
    system "make", "install"
    pkgshare.install Dir["wordlists"]
  end
end
